diff --git a/include/sysemu/os-posix.h b/include/sysemu/os-posix.h
index 9c7dfdfb..deff804e 100644
--- a/include/sysemu/os-posix.h
+++ b/include/sysemu/os-posix.h
@@ -33,6 +33,9 @@
 #include <arpa/inet.h>
 #include <netdb.h>
 #include <sys/un.h>
+#ifdef CONFIG_SYSMACROS
+  #include <sys/sysmacros.h>
+#endif
 
 void os_set_line_buffering(void);
 void os_set_proc_name(const char *s);
